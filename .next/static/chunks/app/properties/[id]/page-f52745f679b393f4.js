(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{1269:function(e,t,n){Promise.resolve().then(n.bind(n,9786)),Promise.resolve().then(n.bind(n,5563))},9786:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var a=n(7437),s=n(2265),r=n(998),o=n(6463);let i=e=>{let{filled:t}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:t?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 21l-7.682-7.682a4.5 4.5 0 010-6.364z"})})};function l(e){let{propertyId:t,isInitiallyFavorited:n}=e,{data:l,status:u}=(0,r.useSession)(),c=(0,o.useRouter)(),[d,f]=(0,s.useState)(n),[h,m]=(0,s.useState)(!1),p=async()=>{if("authenticated"!==u){c.push("/login");return}m(!0),f(!d),(await fetch("/api/favorites",{method:d?"DELETE":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({propertyId:t})})).ok||(f(d),alert("오류가 발생했습니다. 다시 시도해주세요.")),c.refresh(),m(!1)};return"loading"===u?(0,a.jsx)("div",{className:"h-12 w-full bg-gray-200 rounded-lg animate-pulse"}):"authenticated"!==u?(0,a.jsx)("button",{onClick:()=>c.push("/login"),className:"w-full h-12 mt-2 bg-blue-500 text-white rounded-lg flex items-center justify-center font-bold",children:"로그인 후 찜하기"}):(0,a.jsxs)("button",{onClick:p,disabled:h,className:"w-full h-12 mt-2 rounded-lg flex items-center justify-center font-bold transition-colors ".concat(d?"bg-pink-500 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"),children:[(0,a.jsx)(i,{filled:d}),(0,a.jsx)("span",{className:"ml-2",children:d?"찜 해제":"찜하기"})]})}},5563:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var a=n(7437),s=n(2265),r=n(357);function o(e){let{latitude:t,longitude:n,className:o}=e,i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=r.env.NEXT_PUBLIC_KAKAO_MAP_API_KEY;if(!e){console.error("Kakao Map API key is missing. Please set NEXT_PUBLIC_KAKAO_MAP_API_KEY environment variable.");return}let a=document.createElement("script");return a.src="//dapi.kakao.com/v2/maps/sdk.js?appkey=".concat(e,"&autoload=false"),a.async=!0,a.onload=()=>{window.kakao.maps.load(()=>{if(i.current){let e={center:new window.kakao.maps.LatLng(t,n),level:3},a=new window.kakao.maps.Map(i.current,e),s=new window.kakao.maps.LatLng(t,n);new window.kakao.maps.Marker({position:s}).setMap(a)}})},document.head.appendChild(a),()=>{document.head.removeChild(a)}},[t,n]),(0,a.jsx)("div",{ref:i,className:o,children:!r.env.NEXT_PUBLIC_KAKAO_MAP_API_KEY&&(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:(0,a.jsx)("span",{className:"text-red-500",children:"카카오 지도 API 키가 필요합니다."})})})}},6463:function(e,t,n){"use strict";var a=n(1169);n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[998,971,23,744],function(){return e(e.s=1269)}),_N_E=e.O()}]);